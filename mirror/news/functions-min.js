var socket,twentyMin_Front="http://www.20min.ch/screenplayer/?view=0",twentyMin_Ausland="http://www.20min.ch/screenplayer/?view=129",twentyMin_Schweiz="http://www.20min.ch/screenplayer/?view=63",twentyMin_Wirtschaft="http://www.20min.ch/screenplayer/?view=15",twentyMin_People="http://www.20min.ch/screenplayer/?view=83",twentyMin_Sprot="http://www.20min.ch/screenplayer/?view=67",twentyMin_Digital="http://www.20min.ch/screenplayer/?view=69",twentyMin_Wissen="http://www.20min.ch/screenplayer/?view=77",twentyMin_Auto="http://www.20min.ch/screenplayer/?view=71",twentyMin_Games="http://www.20min.ch/screenplayer/?view=117",clockStyle="clock1",sources,twentyMinThemes=["Front","Ausland","Schweiz","Wirtschaft","People","Sprot","Digital","Wissen","Auto","Games"],tagiThemes=["Front","Zürich","Schweiz","Börse","International","Reisen","Wirtschaft","Kultur","Sport","Auto","Panorama","Digital"],blickThemes=["Front","Ausland","Schweiz","Zürich","Wirtschaft","Sport","People","Life"],nzzThemes=["Front","International","Schweiz","Zürich","Wirtschaft","Finanzen","Kultur","Sport","Panorama","Wissenschaft","Auto","Digital"],currentTheme="",currentSource="",NEWS_SOURCE={TWENTY_MIN:{value:"20Min"},BLICK:{value:"Blick"},NZZ:{value:"NZZ"},TAGI:{value:"Tagesanzeiger"}};$(document).ready(function(){initText("de"),annyang&&(annyang.setLanguage("de"),annyang.removeCommands(),annyang.addCommands(commands),annyang.start()),gest.options.subscribeWithCallback(function(e){var n="";n=e.direction?e.direction:e.error.message,"Right"==n&&(console.log("r"),selectTheme(currentSource,checkNextTheme("next"))),"Left"==n&&(console.log("l"),selectTheme(currentSource,checkNextTheme("before")))}),gest.start(),setupData(DATA_TYPE.NEWS)}),initNews=function(){sources.sort(compare);var e="";$.each(sources,function(n,t){e+='<li><a href="#" id="'+t.source+'" onclick="selectSource(\''+t.source+"');\">"+t.source+"</a></li>"}),$("#source")[0].innerHTML=e,selectSource(sources[0].source)},selectSource=function(e){if("20min"===e&&currentSource!==e){$("#news")[0].innerHTML="",currentTheme=null;var n="";$.each(twentyMinThemes,function(t,i){n+='<li ><a href="#" id="'+i+'" onclick="selectTheme(\''+e+"', '"+i+"');\">"+i+"</a></li>"}),$("#themes")[0].innerHTML=n,currentSource=e}else if("Tagesanzeiger"===e&&currentSource!==e){$("#news")[0].innerHTML="",currentTheme=null;var n="",t=getAvailableThemes(NEWS_SOURCE.TAGI,tagiThemes);$.each(t,function(t,i){n+='<li><a href="#" id="'+i+'" onclick="selectTheme(\''+e+"', '"+i+"');\">"+i+"</a></li>"}),$("#themes")[0].innerHTML=n,currentSource=e}else if("Blick"===e&&currentSource!==e){$("#news")[0].innerHTML="",currentTheme=null;var n="";$.each(getAvailableThemes(NEWS_SOURCE.BLICK,blickThemes),function(t,i){n+='<li><a href="#" id="'+i+'" onclick="selectTheme(\''+e+"', '"+i+"');\">"+i+"</a></li>"}),$("#themes")[0].innerHTML=n,currentSource=e}else if("NZZ"===e&&currentSource!==e){$("#news")[0].innerHTML="",currentTheme=null;var n="";$.each(getAvailableThemes(NEWS_SOURCE.NZZ,nzzThemes),function(t,i){n+='<li><a href="#" id="'+i+'" onclick="selectTheme(\''+e+"', '"+i+"');\">"+i+"</a></li>"}),$("#themes")[0].innerHTML=n,currentSource=e}document.getElementById("20min").className="nSelectedNews",document.getElementById("NZZ").className="nSelectedNews",document.getElementById("Tagesanzeiger").className="nSelectedNews",document.getElementById("Blick").className="nSelectedNews",document.getElementById(e).className="selectedNews",selectTheme(e,"Front")},selectTheme=function(e,n){if($("#news")[0].innerHTML="<b>"+getText("NEWS_ERROR_NO_DATA"),"20min"===e){var t=window["twentyMin_"+n];$("#news")[0].innerHTML='<iframe src="'+t+'" style="width : 100%; height : 700px;"></iframe>',currentTheme=n}else if("Tagesanzeiger"===e){currentTheme=n;var i=getTagiData(n);buildTagiData(i,0,n)}else if("Blick"===e){currentTheme=n;var i=getBlickData(n);buildBlickData(i,0,n)}else if("NZZ"===e){currentTheme=n;var i=getNZZData(n);buildNZZData(i,0,n)}$("#themes li a").removeClass("selectedTheme"),document.getElementById(n).className="selectedTheme"},buildTagiData=function(e,n,t){if("Tagesanzeiger"===currentSource&&currentTheme===t){$xml=$(e);var i=$xml.find("item");i[n]||(n=0),$("#news")[0].innerHTML=parseTagiData($xml,i,n),setTimeout(function(){buildTagiData(e,n+1,t)},5e3)}},buildBlickData=function(e,n,t){if("Blick"===currentSource&&currentTheme===t){$xml=$(e);var i=$xml.find("item");i.length>0&&(i[n]||(n=0),$("#news")[0].innerHTML=parseBlickData($xml,i,n),setTimeout(function(){buildBlickData(e,n+1,t)},5e3))}},buildNZZData=function(e,n,t){if("NZZ"===currentSource&&currentTheme===t){$xml=$(e);var i=$xml.find("item");i[n]||(n=0),$("#news")[0].innerHTML=parseNZZData($xml,i,n),setTimeout(function(){buildNZZData(e,n+1,t)},5e3)}};