var settingsURL="http://192.168.1.124:8081/settings",weatherApiKey="307fbfa5c26f248d4bf737722b750fad",city="Zuerich",country="ch",forecastWeatherURL="http://api.openweathermap.org/data/2.5/forecast?q="+city+","+country+"&units=metric&id=524901&APPID="+weatherApiKey,currentWeatherURL="http://api.openweathermap.org/data/2.5/weather?q="+city+","+country+"&units=metric&id=524901&APPID="+weatherApiKey,clockStyle,quoteCategories,quoteInterval,quote="",author="";$(document).ready(function(){if($.ajax({type:"GET",contentType:"application/json",url:settingsURL,success:function(t){var e=JSON.parse(t)[0];quoteInterval=6e4*e.quotes.interval,quoteCategories=e.quotes.selectedCategories,clockStyle=e.layout.selectedClockWidget,initWeather(),initForecast(),initQuote(),startTime("clock"),$("#clock")[0].classList.add(clockStyle)},error:function(t){startTime("clock"),$("#clock")[0].classList.add("clock1"),initWeather(),initForecast()}}),annyang){annyang.setLanguage("de");var t={news:function(){window.location="../mirror/news"},maps:function(){window.location="../mirror/maps"}};annyang.addCommands(t),annyang.start()}}),startTime=function(t){var e=new Date,n=e.getDate(),a=e.getMonth(),r=e.getFullYear(),i=e.getHours(),o=e.getMinutes(),c=e.getSeconds();n=checkTime(n),a=checkTime(a),o=checkTime(o),c=checkTime(c),$("#"+t)[0].innerHTML=i+":"+o+":"+c+'<br><span class="date">'+n+"."+a+"."+r+"</span>",setTimeout(function(){startTime(t)},500)},checkTime=function(t){return t<10&&(t="0"+t),t},initWeather=function(){$.getJSON(currentWeatherURL,function(t){$("#icon")[0].src="PNG/"+t.weather[0].icon+".png",$("#location")[0].innerHTML=t.name,$("#temp")[0].innerHTML=t.main.temp,$("#description")[0].innerHTML=translateWeather(t.weather[0].description)})},initForecast=function(){$.getJSON(forecastWeatherURL,function(t){for(var e=new Date,n=e.getDate(),a=0,r=0,i=1,o=200,c=-200,s=[],u=[],l=["200","200","200","200","200","200"],m=["-200","-200","-200","-200","-200","-200"],h=[],p=[];t.list[i];)0===t.list[r].dt_txt.substring(9,10).localeCompare(t.list[i].dt_txt.substring(9,10))?(t.list[r].weather[0].icon.endsWith("d")&&(p[p.length]="PNG/"+t.list[r].weather[0].icon+".png",h[h.length]=t.list[r].weather[0].description),l[a]>t.list[r].main.temp_min&&(l[a]=t.list[r].main.temp_min),m[a]<t.list[r].main.temp_max&&(m[a]=t.list[r].main.temp_max)):(0===p.length&&(p[p.length]="PNG/"+t.list[r].weather[0].icon+".png",h[h.length]=t.list[r].weather[0].description),s[a]=mode(p),u[a]=mode(h),p=[],h=[],a+=1),i++,r++;$("#forecast_minTemp1")[0].innerHTML=l[0],$("#forecast_maxTemp1")[0].innerHTML=m[0],$("#forecast_icon1")[0].src=s[0],$("#forecast_description1")[0].innerHTML=translateWeather(u[0]),$("#forecast_minTemp2")[0].innerHTML=l[1],$("#forecast_maxTemp2")[0].innerHTML=m[1],$("#forecast_icon2")[0].src=s[1],$("#forecast_description2")[0].innerHTML=translateWeather(u[1]),$("#forecast_minTemp3")[0].innerHTML=l[2],$("#forecast_maxTemp3")[0].innerHTML=m[2],$("#forecast_icon3")[0].src=s[2],$("#forecast_description3")[0].innerHTML=translateWeather(u[2])})},initQuote=function(){var t=$("#quote")[0],e=quoteCategories[getRandomInt(0,quoteCategories.length-1)],n="http://quotes.rest/qod.json?category="+e;$.getJSON(n,function(e){quote=e.contents.quotes[0].quote,author=e.contents.quotes[0].author,t.innerHTML=quote+"  -  "+author}),setTimeout(function(){initQuote()},quoteInterval)},mode=function(t){if(0===t.length)return null;for(var e={},n=t[0],a=1,r=0;r<t.length;r++){var i=t[r];null===e[i]?e[i]=1:e[i]++,e[i]>a&&(n=i,a=e[i])}return n},translateWeather=function(t){for(var e=["clear sky","Orange","Apple","Mango"],n=["Klarer Himmel","Orange","Apple","Mango"],a=0;a<e.length;a++)t===e[a]&&(t=n[a]);return t},getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};