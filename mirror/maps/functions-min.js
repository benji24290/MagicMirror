var map,socket,lastDirectionsDetails,DIRECTIONS={LEFT:{value:"left"},RIGHT:{value:"right"},UP:{value:"up"},DOWN:{value:"down"}};$(document).ready(function(){annyang&&(annyang.setLanguage("de"),annyang.removeCommands(),annyang.addCommands(commands),annyang.start()),setupData(DATA_TYPE.MAPS),gest.options.subscribeWithCallback(function(e){var n="";n=e.direction?e.direction:e.error.message,"Right"==n?(console.log("r"),moveOnMap(DIRECTIONS.RIGHT)):"Left"==n?(console.log("l"),moveOnMap(DIRECTIONS.LEFT)):"Long up"==n?(console.log("u"),moveOnMap(DIRECTIONS.UP)):"Long down"==n?(console.log("d"),moveOnMap(DIRECTIONS.DOWN)):console.log(n)}),gest.start()}),initMap=function(){map=new google.maps.Map($("#map")[0],{center:{lat:-34.397,lng:150.644},scrollwheel:!1,zoom:8}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var n={lat:e.coords.latitude,lng:e.coords.longitude};map.setCenter(n)},function(){})},findDirectionsWith=function(e){var n=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer;o.setMap(map),calculateAndDisplayRoute(n,o,e)},findDirections=function(){var e=new google.maps.DirectionsService,n=new google.maps.DirectionsRenderer;n.setMap(map),calculateAndDisplayRoute(e,n,"DRIVING")},calculateAndDisplayRoute=function(e,n,o){e.route({origin:$("#startInput")[0].value,destination:$("#endInput")[0].value,travelMode:o},function(e,t){"OK"===t?(n.setDirections(e),console.log(o),showDetails(e)):console.log("Directions request failed due to "+t)})},showDetails=function(e){var n="",o="";$.each(e.routes[0].legs,function(e,t){t.departure_time&&(n+="Abfahrt: "+t.departure_time.text+"\n",o+="Abfahrt: "+t.departure_time.text+"\n"),t.arrival_time&&(n+="Ankunft: "+t.arrival_time.text+"\n",o+=". Ankunft: "+t.arrival_time.text+"\n"),n+="Distanz: "+t.distance.text+"\n",n+="Dauer: "+t.duration.text+"<br>",o+="die Distanz betr√§gt "+t.distance.text+"\n",o+="und dauert "+t.duration.text,$.each(t.steps,function(e,o){n+=e+1+". "+o.instructions+"<br>"})}),speak(o,"de"),document.getElementById("detailsCenter").innerHTML=n},toggleSearchMode=function(e){"single"===e?($("#singleLocation").show(),$("#directions").hide()):"directions"===e&&($("#singleLocation").hide(),$("#directions").show())},moveOnMap=function(e){e===DIRECTIONS.UP?map.panBy(0,-400):e===DIRECTIONS.DOWN?map.panBy(0,400):e===DIRECTIONS.LEFT?map.panBy(-400,0):e===DIRECTIONS.RIGHT&&map.panBy(400,0)},zoomIn=function(){map.zoom<=21?map.setZoom(map.zoom+1):(speak("maximales zoom  erreicht","de"),console.log("max zoomin"))},zoomOut=function(){map.zoom>=3?map.setZoom(map.zoom-1):(speak("minimales zoom  erreicht","de"),console.log("max zoomout"))};