var map,socket,lastDirectionsDetails,DIRECTIONS={LEFT:{value:"left"},RIGHT:{value:"right"},UP:{value:"up"},DOWN:{value:"down"}};$(document).ready(function(){annyang&&(annyang.setLanguage("de"),annyang.removeCommands(),annyang.addCommands(commands),annyang.start()),setupData(DATA_TYPE.MAPS),gest.options.subscribeWithCallback(function(o){var e="";e=o.direction?o.direction:o.error.message,"Right"==e?(console.log("r"),moveOnMap(DIRECTIONS.RIGHT)):"Left"==e?(console.log("l"),moveOnMap(DIRECTIONS.LEFT)):"Long up"==e?(console.log("u"),moveOnMap(DIRECTIONS.UP)):"Long down"==e?(console.log("d"),moveOnMap(DIRECTIONS.DOWN)):console.log(e)}),gest.start()}),initMap=function(){map=new google.maps.Map($("#map")[0],{center:{lat:-34.397,lng:150.644},scrollwheel:!1,zoom:8}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){var e={lat:o.coords.latitude,lng:o.coords.longitude};map.setCenter(e)},function(){})},findDirectionsWith=function(o){var e=new google.maps.DirectionsService,n=new google.maps.DirectionsRenderer;n.setMap(map),calculateAndDisplayRoute(e,n,o)},findDirections=function(){var o=new google.maps.DirectionsService,e=new google.maps.DirectionsRenderer;e.setMap(map),calculateAndDisplayRoute(o,e,"DRIVING")},calculateAndDisplayRoute=function(o,e,n){o.route({origin:$("#startInput")[0].value,destination:$("#endInput")[0].value,travelMode:n},function(o,n){"OK"===n?(e.setDirections(o),showDetails(o)):console.log("Directions request failed due to "+n)})},showDetails=function(o){var e="";$.each(o.routes[0].legs,function(o,n){n.departure_time&&(e+="departure: "+n.departure_time.text+"\n"),n.arrival_time&&(e+="arrival: "+n.arrival_time.text+"\n"),e+="distance: "+n.distance.text+"\n",e+="durcation: "+n.duration.text+"\n",$.each(n.steps,function(o,n){e+=o+1+". "+n.instructions+"\n"})}),alert(e)},toggleSearchMode=function(o){"single"===o?($("#singleLocation").show(),$("#directions").hide()):"directions"===o&&($("#singleLocation").hide(),$("#directions").show())},moveOnMap=function(o){o===DIRECTIONS.UP?map.panBy(0,-400):o===DIRECTIONS.DOWN?map.panBy(0,400):o===DIRECTIONS.LEFT?map.panBy(-400,0):o===DIRECTIONS.RIGHT&&map.panBy(400,0)},zoomIn=function(){map.zoom<=21?map.setZoom(map.zoom+1):console.log("max zoomin")},zoomOut=function(){map.zoom>=3?map.setZoom(map.zoom-1):console.log("max zoomout")};