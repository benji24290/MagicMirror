var settingsURL="http://localhost:8081/settings",map,socket;$(document).ready(function(){if(annyang){annyang.setLanguage("de");var t={news:function(){window.location="../news"},home:function(){window.location="../"}};annyang.removeCommands(),annyang.addCommands(t),annyang.start()}$.ajax({type:"GET",contentType:"application/json",url:settingsURL,success:function(t){socket=io.connect("http://localhost:8081"),socket.on("SETTINGS_UPDATE",function(t){refreshData()});var e=JSON.parse(t)[0];clockStyle=e.layout.selectedClockWidget,startTime("clock"),$("#clock")[0].classList.add(clockStyle),initMap()}})}),initMap=function(){map=new google.maps.Map($("#map")[0],{center:{lat:-34.397,lng:150.644},scrollwheel:!1,zoom:8}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};map.setCenter(e)},function(){})},startTime=function(t){var e=new Date,o=e.getDate(),n=e.getMonth(),a=e.getFullYear(),c=e.getHours(),s=e.getMinutes(),i=e.getSeconds();o=checkTime(o),n=checkTime(n),s=checkTime(s),i=checkTime(i),$("#"+t)[0].innerHTML=c+":"+s+":"+i+'<br><span class="date">'+o+"."+n+"."+a+"</span>",setTimeout(function(){startTime(t)},500)},checkTime=function(t){return t<10&&(t="0"+t),t},setLocation=function(){var t=new google.maps.Geocoder,e=$("#location")[0].value;t.geocode({address:e},function(t,e){if(e==google.maps.GeocoderStatus.OK){var o=t[0].geometry.location.lat(),n=t[0].geometry.location.lng(),a={lat:t[0].geometry.location.lat(),lng:t[0].geometry.location.lng()};map.setCenter(a),map.setZoom(15),getZoomLevel(a)}})},getZoomLevel=function(t){var e={host:"maps.googleapis.com",path:"/maps/api/geocode/json?latlng="+t.lat+","+t.lng+"&sensor=true",method:"https"};$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"http://localhost:8081/address",success:function(t){var e=JSON.parse(t).results}})},refreshData=function(){$.ajax({type:"GET",contentType:"application/json",url:settingsURL,success:function(t){var e=JSON.parse(t)[0];clockStyle=e.layout.selectedClockWidget,startTime("clock"),$("#clock")[0].classList="",$("#clock")[0].classList.add(clockStyle),initMap()}})};