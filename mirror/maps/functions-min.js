var map,socket,lastDirectionsDetails,DIRECTIONS={LEFT:{value:"left"},RIGHT:{value:"right"},UP:{value:"up"},DOWN:{value:"down"}};$(document).ready(function(){annyang&&(annyang.setLanguage("de"),annyang.removeCommands(),annyang.addCommands(commands),annyang.start()),setupData(DATA_TYPE.MAPS),gest.options.subscribeWithCallback(function(e){var o="";o=e.direction?e.direction:e.error.message,"Right"==o?(console.log("r"),moveOnMap(DIRECTIONS.RIGHT)):"Left"==o?(console.log("l"),moveOnMap(DIRECTIONS.LEFT)):"Long up"==o?(console.log("u"),moveOnMap(DIRECTIONS.UP)):"Long down"==o?(console.log("d"),moveOnMap(DIRECTIONS.DOWN)):console.log(o)}),gest.start()}),initMap=function(){map=new google.maps.Map($("#map")[0],{center:{lat:-34.397,lng:150.644},scrollwheel:!1,zoom:8}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};map.setCenter(o)},function(){})},findDirectionsWith=function(e){var o=new google.maps.DirectionsService,n=new google.maps.DirectionsRenderer;n.setMap(map),calculateAndDisplayRoute(o,n,e)},findDirections=function(){var e=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer;o.setMap(map),calculateAndDisplayRoute(e,o,"DRIVING")},calculateAndDisplayRoute=function(e,o,n){e.route({origin:$("#startInput")[0].value,destination:$("#endInput")[0].value,travelMode:n},function(e,t){"OK"===t?(o.setDirections(e),console.log(n),showDetails(e)):console.log("Directions request failed due to "+t)})},showDetails=function(e){var o="",n="";$.each(e.routes[0].legs,function(e,t){t.departure_time&&(o+="Abfahrt: "+t.departure_time.text+"\n",n+="Abfahrt: "+t.departure_time.text+"\n"),t.arrival_time&&(o+="Ankunft: "+t.arrival_time.text+"\n",n+=". Ankunft: "+t.arrival_time.text+"\n"),o+="Distanz: "+t.distance.text+"\n",o+="Dauer: "+t.duration.text+"<br>",n+="die Distanz betr√§gt "+t.distance.text+"\n",n+="und dauert "+t.duration.text,$.each(t.steps,function(e,n){o+=e+1+". "+n.instructions+"<br>"})}),speak(n,"de"),document.getElementById("detailsCenter").innerHTML=o},toggleSearchMode=function(e){"single"===e?($("#singleLocation").show(),$("#directions").hide()):"directions"===e&&($("#singleLocation").hide(),$("#directions").show())},moveOnMap=function(e){var o;e===DIRECTIONS.UP?(map.panBy(0,-400),o=map.getBounds(),console.log(o.f.f),o.f.f>85&&(speak("oberes kartenende erreicht","de"),console.log("top reached"),map.panBy(0,400))):e===DIRECTIONS.DOWN?(map.panBy(0,400),o=map.getBounds(),console.log(o.f.b),o.f.b<-85&&(speak("unteres kartenende erreicht","de"),console.log("top reached"),map.panBy(0,-400))):e===DIRECTIONS.LEFT?map.panBy(-400,0):e===DIRECTIONS.RIGHT&&map.panBy(400,0)},zoomIn=function(){map.zoom<=21?map.setZoom(map.zoom+1):(speak("maximales zoom  erreicht","de"),console.log("max zoomin"))},zoomOut=function(){map.zoom>=3?map.setZoom(map.zoom-1):(speak("minimales zoom  erreicht","de"),console.log("max zoomout"))};